{"version":3,"sources":["../src/server.ts"],"sourcesContent":["import { getContext } from './lib/context.js';\nexport {\n  getContext as unstable_getContext,\n  getContextData as unstable_getContextData,\n} from './lib/context.js';\n\n// The use of `globalThis` in this file is more or less a hack.\n// It should be revisited with a better solution.\n\n/**\n * This is an internal function and not for public use.\n */\nexport function INTERNAL_setAllEnv(newEnv: Readonly<Record<string, string>>) {\n  (globalThis as any).__WAKU_SERVER_ENV__ = newEnv;\n}\n\nexport function getEnv(key: string): string | undefined {\n  return (globalThis as any).__WAKU_SERVER_ENV__?.[key];\n}\n\nexport function unstable_getHeaders(): Readonly<Record<string, string>> {\n  return Object.fromEntries(getContext().req.headers.entries());\n}\n"],"names":["getContext","unstable_getContext","getContextData","unstable_getContextData","INTERNAL_setAllEnv","newEnv","globalThis","__WAKU_SERVER_ENV__","getEnv","key","unstable_getHeaders","Object","fromEntries","req","headers","entries"],"mappings":"AAAA,SAASA,UAAU,QAAQ,mBAAmB;AAC9C,SACEA,cAAcC,mBAAmB,EACjCC,kBAAkBC,uBAAuB,QACpC,mBAAmB;AAE1B,+DAA+D;AAC/D,iDAAiD;AAEjD;;CAEC,GACD,OAAO,SAASC,mBAAmBC,MAAwC;IACxEC,WAAmBC,mBAAmB,GAAGF;AAC5C;AAEA,OAAO,SAASG,OAAOC,GAAW;IAChC,OAAO,AAACH,WAAmBC,mBAAmB,EAAE,CAACE,IAAI;AACvD;AAEA,OAAO,SAASC;IACd,OAAOC,OAAOC,WAAW,CAACZ,aAAaa,GAAG,CAACC,OAAO,CAACC,OAAO;AAC5D"}