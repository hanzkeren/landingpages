{"version":3,"sources":["../src/cli.ts"],"sourcesContent":["import { createRequire } from 'node:module';\nimport process from 'node:process';\nimport { parseArgs } from 'node:util';\nimport * as dotenv from 'dotenv';\n\nconst require = createRequire(new URL('.', import.meta.url));\n\ndotenv.config({ path: ['.env.local', '.env'], quiet: true });\n\nconst { values, positionals } = parseArgs({\n  args: process.argv.slice(2),\n  allowPositionals: true,\n  options: {\n    host: {\n      type: 'string',\n      short: 'h',\n    },\n    port: {\n      type: 'string',\n      short: 'p',\n    },\n    version: {\n      type: 'boolean',\n      short: 'v',\n    },\n    help: {\n      type: 'boolean',\n    },\n  },\n});\n\nconst cmd = positionals[0];\n\nasync function run() {\n  if (values.version) {\n    const { version } = require('../package.json');\n    console.log(version);\n  } else if (values.help) {\n    displayUsage();\n  } else if (cmd === 'dev' || cmd === 'build' || cmd === 'start') {\n    const { cli } = await import('./lib/vite-rsc/cli.js');\n    await cli(cmd, values);\n  } else {\n    if (cmd) {\n      console.error('Unknown command:', cmd);\n    }\n    displayUsage();\n  }\n}\n\nfunction displayUsage() {\n  console.log(`\nUsage: waku [options] <command>\n\nCommands:\n  dev         Start the development server\n  build       Build the application for production\n  start       Start the production server\n\nOptions:\n  -h, --host            Hostname to bind (e.g. 0.0.0.0)\n  -p, --port            Port number for the server\n  -v, --version         Display the version number\n      --help            Display this help message\n`);\n}\n\nrun().catch((error) => {\n  console.error(error);\n  process.exit(1);\n});\n"],"names":["createRequire","process","parseArgs","dotenv","require","URL","url","config","path","quiet","values","positionals","args","argv","slice","allowPositionals","options","host","type","short","port","version","help","cmd","run","console","log","displayUsage","cli","error","catch","exit"],"mappings":"AAAA,SAASA,aAAa,QAAQ,cAAc;AAC5C,OAAOC,aAAa,eAAe;AACnC,SAASC,SAAS,QAAQ,YAAY;AACtC,YAAYC,YAAY,SAAS;AAEjC,MAAMC,UAAUJ,cAAc,IAAIK,IAAI,KAAK,YAAYC,GAAG;AAE1DH,OAAOI,MAAM,CAAC;IAAEC,MAAM;QAAC;QAAc;KAAO;IAAEC,OAAO;AAAK;AAE1D,MAAM,EAAEC,MAAM,EAAEC,WAAW,EAAE,GAAGT,UAAU;IACxCU,MAAMX,QAAQY,IAAI,CAACC,KAAK,CAAC;IACzBC,kBAAkB;IAClBC,SAAS;QACPC,MAAM;YACJC,MAAM;YACNC,OAAO;QACT;QACAC,MAAM;YACJF,MAAM;YACNC,OAAO;QACT;QACAE,SAAS;YACPH,MAAM;YACNC,OAAO;QACT;QACAG,MAAM;YACJJ,MAAM;QACR;IACF;AACF;AAEA,MAAMK,MAAMZ,WAAW,CAAC,EAAE;AAE1B,eAAea;IACb,IAAId,OAAOW,OAAO,EAAE;QAClB,MAAM,EAAEA,OAAO,EAAE,GAAGjB,QAAQ;QAC5BqB,QAAQC,GAAG,CAACL;IACd,OAAO,IAAIX,OAAOY,IAAI,EAAE;QACtBK;IACF,OAAO,IAAIJ,QAAQ,SAASA,QAAQ,WAAWA,QAAQ,SAAS;QAC9D,MAAM,EAAEK,GAAG,EAAE,GAAG,MAAM,MAAM,CAAC;QAC7B,MAAMA,IAAIL,KAAKb;IACjB,OAAO;QACL,IAAIa,KAAK;YACPE,QAAQI,KAAK,CAAC,oBAAoBN;QACpC;QACAI;IACF;AACF;AAEA,SAASA;IACPF,QAAQC,GAAG,CAAC,CAAC;;;;;;;;;;;;;AAaf,CAAC;AACD;AAEAF,MAAMM,KAAK,CAAC,CAACD;IACXJ,QAAQI,KAAK,CAACA;IACd5B,QAAQ8B,IAAI,CAAC;AACf"}