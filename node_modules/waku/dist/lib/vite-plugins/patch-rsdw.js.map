{"version":3,"sources":["../../../src/lib/vite-plugins/patch-rsdw.ts"],"sourcesContent":["import type { Plugin } from 'vite';\n\nexport function patchRsdwPlugin(): Plugin {\n  return {\n    // rewrite `react-server-dom-webpack` in `waku/minimal/client`\n    name: 'waku:vite-plugins:patch-rsdw',\n    enforce: 'pre',\n    resolveId(source, _importer, _options) {\n      if (source === 'react-server-dom-webpack/client') {\n        return '\\0' + source;\n      }\n    },\n    load(id) {\n      if (id === '\\0react-server-dom-webpack/client') {\n        if (this.environment.name === 'client') {\n          return `\n              import * as ReactClient from ${JSON.stringify(import.meta.resolve('@vitejs/plugin-rsc/browser'))};\n              export default ReactClient;\n            `;\n        }\n        return `export default {}`;\n      }\n    },\n  };\n}\n"],"names":["patchRsdwPlugin","name","enforce","resolveId","source","_importer","_options","load","id","environment","JSON","stringify","resolve"],"mappings":"AAEA,OAAO,SAASA;IACd,OAAO;QACL,8DAA8D;QAC9DC,MAAM;QACNC,SAAS;QACTC,WAAUC,MAAM,EAAEC,SAAS,EAAEC,QAAQ;YACnC,IAAIF,WAAW,mCAAmC;gBAChD,OAAO,OAAOA;YAChB;QACF;QACAG,MAAKC,EAAE;YACL,IAAIA,OAAO,qCAAqC;gBAC9C,IAAI,IAAI,CAACC,WAAW,CAACR,IAAI,KAAK,UAAU;oBACtC,OAAO,CAAC;2CACyB,EAAES,KAAKC,SAAS,CAAC,YAAYC,OAAO,CAAC,+BAA+B;;YAEnG,CAAC;gBACL;gBACA,OAAO,CAAC,iBAAiB,CAAC;YAC5B;QACF;IACF;AACF"}