{"version":3,"sources":["../../../src/lib/vite-plugins/virtual-config.ts"],"sourcesContent":["import type { Plugin } from 'vite';\nimport type { Config } from '../../config.js';\n\nexport function virtualConfigPlugin(config: Required<Config>): Plugin {\n  const configModule = 'virtual:vite-rsc-waku/config';\n  return {\n    name: 'waku:vite-plugins:virtual-config',\n    resolveId(source, _importer, _options) {\n      return source === configModule ? '\\0' + configModule : undefined;\n    },\n    load(id) {\n      if (id === '\\0' + configModule) {\n        return `\n        export const config = ${JSON.stringify({ ...config, vite: undefined })};\n        export const isBuild = ${JSON.stringify(this.environment.mode === 'build')};\n      `;\n      }\n    },\n  };\n}\n"],"names":["virtualConfigPlugin","config","configModule","name","resolveId","source","_importer","_options","undefined","load","id","JSON","stringify","vite","environment","mode"],"mappings":"AAGA,OAAO,SAASA,oBAAoBC,MAAwB;IAC1D,MAAMC,eAAe;IACrB,OAAO;QACLC,MAAM;QACNC,WAAUC,MAAM,EAAEC,SAAS,EAAEC,QAAQ;YACnC,OAAOF,WAAWH,eAAe,OAAOA,eAAeM;QACzD;QACAC,MAAKC,EAAE;YACL,IAAIA,OAAO,OAAOR,cAAc;gBAC9B,OAAO,CAAC;8BACc,EAAES,KAAKC,SAAS,CAAC;oBAAE,GAAGX,MAAM;oBAAEY,MAAML;gBAAU,GAAG;+BAChD,EAAEG,KAAKC,SAAS,CAAC,IAAI,CAACE,WAAW,CAACC,IAAI,KAAK,SAAS;MAC7E,CAAC;YACD;QACF;IACF;AACF"}