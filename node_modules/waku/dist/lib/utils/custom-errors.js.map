{"version":3,"sources":["../../../src/lib/utils/custom-errors.ts"],"sourcesContent":["type ErrorInfo = {\n  status?: number;\n  location?: string;\n};\n\nconst isErrorInfo = (x: unknown): x is ErrorInfo => {\n  if (typeof x !== 'object' || x === null) {\n    return false;\n  }\n  if ('status' in x && typeof (x as ErrorInfo).status !== 'number') {\n    return false;\n  }\n  if ('location' in x && typeof (x as ErrorInfo).location !== 'string') {\n    return false;\n  }\n  return true;\n};\n\nconst prefix = '__WAKU_CUSTOM_ERROR__;';\n\n// This is an internal API and not for public use\nexport const createCustomError = (message: string, errorInfo: ErrorInfo) => {\n  const err = new Error(message);\n  (err as any).digest = prefix + JSON.stringify(errorInfo);\n  return err;\n};\n\nexport const getErrorInfo = (err: unknown) => {\n  const digest = (err as any)?.digest;\n  if (typeof digest !== 'string' || !digest.startsWith(prefix)) {\n    return null;\n  }\n  try {\n    const info = JSON.parse(digest.slice(prefix.length));\n    if (isErrorInfo(info)) {\n      return info;\n    }\n  } catch {\n    // ignore\n  }\n  return null;\n};\n"],"names":["isErrorInfo","x","status","location","prefix","createCustomError","message","errorInfo","err","Error","digest","JSON","stringify","getErrorInfo","startsWith","info","parse","slice","length"],"mappings":"AAKA,MAAMA,cAAc,CAACC;IACnB,IAAI,OAAOA,MAAM,YAAYA,MAAM,MAAM;QACvC,OAAO;IACT;IACA,IAAI,YAAYA,KAAK,OAAO,AAACA,EAAgBC,MAAM,KAAK,UAAU;QAChE,OAAO;IACT;IACA,IAAI,cAAcD,KAAK,OAAO,AAACA,EAAgBE,QAAQ,KAAK,UAAU;QACpE,OAAO;IACT;IACA,OAAO;AACT;AAEA,MAAMC,SAAS;AAEf,iDAAiD;AACjD,OAAO,MAAMC,oBAAoB,CAACC,SAAiBC;IACjD,MAAMC,MAAM,IAAIC,MAAMH;IACrBE,IAAYE,MAAM,GAAGN,SAASO,KAAKC,SAAS,CAACL;IAC9C,OAAOC;AACT,EAAE;AAEF,OAAO,MAAMK,eAAe,CAACL;IAC3B,MAAME,SAAUF,KAAaE;IAC7B,IAAI,OAAOA,WAAW,YAAY,CAACA,OAAOI,UAAU,CAACV,SAAS;QAC5D,OAAO;IACT;IACA,IAAI;QACF,MAAMW,OAAOJ,KAAKK,KAAK,CAACN,OAAOO,KAAK,CAACb,OAAOc,MAAM;QAClD,IAAIlB,YAAYe,OAAO;YACrB,OAAOA;QACT;IACF,EAAE,OAAM;IACN,SAAS;IACX;IACA,OAAO;AACT,EAAE"}