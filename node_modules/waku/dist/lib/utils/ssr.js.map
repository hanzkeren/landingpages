{"version":3,"sources":["../../../src/lib/utils/ssr.ts"],"sourcesContent":["const fakeFetchCode = `\nPromise.resolve(new Response(new ReadableStream({\n  start(c) {\n    const d = (self.__FLIGHT_DATA ||= []);\n    const t = new TextEncoder();\n    const f = (s) => c.enqueue(typeof s === 'string' ? t.encode(s) : s);\n    d.forEach(f);\n    d.length = 0;\n    d.push = f;\n    if (document.readyState === 'loading') {\n      document.addEventListener('DOMContentLoaded', () => c.close());\n    } else {\n      c.close();\n    }\n  }\n})))\n`\n  .split('\\n')\n  .map((line) => line.trim())\n  .join('');\n\nexport function getBootstrapPreamble(options: {\n  rscPath: string;\n  hydrate: boolean;\n}) {\n  return `\n    ${options.hydrate ? 'globalThis.__WAKU_HYDRATE__ = true;' : ''}\n    globalThis.__WAKU_PREFETCHED__ = {\n      ${JSON.stringify(options.rscPath)}: ${fakeFetchCode}\n    };\n  `;\n}\n"],"names":["fakeFetchCode","split","map","line","trim","join","getBootstrapPreamble","options","hydrate","JSON","stringify","rscPath"],"mappings":"AAAA,MAAMA,gBAAgB,CAAC;;;;;;;;;;;;;;;;AAgBvB,CAAC,CACEC,KAAK,CAAC,MACNC,GAAG,CAAC,CAACC,OAASA,KAAKC,IAAI,IACvBC,IAAI,CAAC;AAER,OAAO,SAASC,qBAAqBC,OAGpC;IACC,OAAO,CAAC;IACN,EAAEA,QAAQC,OAAO,GAAG,wCAAwC,GAAG;;MAE7D,EAAEC,KAAKC,SAAS,CAACH,QAAQI,OAAO,EAAE,EAAE,EAAEX,cAAc;;EAExD,CAAC;AACH"}