{"version":3,"sources":["../../../src/lib/utils/managed.ts"],"sourcesContent":["import { EXTENSIONS, SRC_MIDDLEWARE, SRC_PAGES } from '../constants.js';\n\nexport const getManagedServerEntry = (srcDir: string) => {\n  const globBase = `/${srcDir}/${SRC_PAGES}`;\n  const globPattern = `${globBase}/**/*.{${EXTENSIONS.map((ext) => ext.slice(1)).join(',')}}`;\n  const middlewareGlob = `/${srcDir}/${SRC_MIDDLEWARE}/*.{${EXTENSIONS.map((ext) => ext.slice(1)).join(',')}}`;\n  return `\nimport { fsRouter } from 'waku';\nimport adapter from 'waku/adapters/default';\n\nexport default adapter(\n  fsRouter(\n    import.meta.glob(\n      ${JSON.stringify(globPattern)},\n      { base: ${JSON.stringify(globBase)} }\n    )\n  ),\n  {\n    middlewareModules: import.meta.glob(${JSON.stringify(middlewareGlob)}),\n  },\n);\n`;\n};\n\nexport const getManagedClientEntry = () => {\n  return `\nimport { StrictMode, createElement } from 'react';\nimport { createRoot, hydrateRoot } from 'react-dom/client';\nimport { Router } from 'waku/router/client';\n\nconst rootElement = createElement(StrictMode, null, createElement(Router));\n\nif (globalThis.__WAKU_HYDRATE__) {\n  hydrateRoot(document, rootElement);\n} else {\n  createRoot(document).render(rootElement);\n}\n`;\n};\n"],"names":["EXTENSIONS","SRC_MIDDLEWARE","SRC_PAGES","getManagedServerEntry","srcDir","globBase","globPattern","map","ext","slice","join","middlewareGlob","JSON","stringify","getManagedClientEntry"],"mappings":"AAAA,SAASA,UAAU,EAAEC,cAAc,EAAEC,SAAS,QAAQ,kBAAkB;AAExE,OAAO,MAAMC,wBAAwB,CAACC;IACpC,MAAMC,WAAW,CAAC,CAAC,EAAED,OAAO,CAAC,EAAEF,WAAW;IAC1C,MAAMI,cAAc,GAAGD,SAAS,OAAO,EAAEL,WAAWO,GAAG,CAAC,CAACC,MAAQA,IAAIC,KAAK,CAAC,IAAIC,IAAI,CAAC,KAAK,CAAC,CAAC;IAC3F,MAAMC,iBAAiB,CAAC,CAAC,EAAEP,OAAO,CAAC,EAAEH,eAAe,IAAI,EAAED,WAAWO,GAAG,CAAC,CAACC,MAAQA,IAAIC,KAAK,CAAC,IAAIC,IAAI,CAAC,KAAK,CAAC,CAAC;IAC5G,OAAO,CAAC;;;;;;;MAOJ,EAAEE,KAAKC,SAAS,CAACP,aAAa;cACtB,EAAEM,KAAKC,SAAS,CAACR,UAAU;;;;wCAID,EAAEO,KAAKC,SAAS,CAACF,gBAAgB;;;AAGzE,CAAC;AACD,EAAE;AAEF,OAAO,MAAMG,wBAAwB;IACnC,OAAO,CAAC;;;;;;;;;;;;AAYV,CAAC;AACD,EAAE"}